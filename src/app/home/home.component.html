<div fxLayout="column" fxLayoutAlign="center center">

  <h3 style="padding: 0px 15px; text-align: center;" fxLayoutAlign="center center" fxLayout="column">
    Find the right National Park and campground for your next adventure!
  </h3>
  <!--
  <div fxLayout="column" fxLayoutAlign="center center" style="min-height: 325px; width: 100%; background-image: url('https://www.nps.gov/common/uploads/structured_data/3C84C6CF-1DD8-B71B-0B1C7CB883AA8FB1.jpg');
    background-size:contain; background-repeat: no-repeat; background-attachment: fixed;"> -->

  <div class="bg-image" fxLayout="column" fxLayoutAlign="center center" style="min-height: 325px; width: 100%;">

    <form [formGroup]="searchParkForm" (ngSubmit)="searchParks()">

      <mat-form-field appearance="outline">

        <mat-label>Search National Parks</mat-label>

        <input matInput type="search" placeholder="Search for National Parks" formControlName="searchQuery">
        <mat-icon matSuffix svgIcon="map-search-outline"></mat-icon>
        <mat-hint>Search the National Parks!</mat-hint>
        <mat-error *ngIf="searchParkForm.get('searchQuery').invalid">Enter a park name</mat-error>

      </mat-form-field>

      <button type="submit" mat-raised-button color="primary">
        <mat-icon>search</mat-icon>
      </button>

    </form>

  </div>

  <div *ngIf="searching && searchSubmitted" fxLayoutAlign="center center" style="padding: 25px 0px 25px 0px">
    <mat-spinner></mat-spinner>
  </div>

  <div *ngIf="noParksFound && searchSubmitted && !searching" fxLayoutAlign="center center"
    style="padding: 25px 0px 25px 0px">
    <h3>No results found, try again</h3>
  </div>

  <!-- <div *ngIf=" noParksFound && !searching && !parksFound">
    No results found
  </div> -->

  <mat-toolbar color="primary" fxLayoutAlign="center center"
    *ngIf="parksFound && searchSubmitted && !searching && !noParksFound">
    Search results for "{{ searchParkForm.get('searchQuery').value }}"
  </mat-toolbar>

  <div *ngIf="parksFound && !noParksFound" fxLayoutGap="50px" fxLayoutAlign="center center"
    style="padding: 30px 0px 30px 0px">

    <div fxLayout="column" fxFlex="90" fxLayoutGap="15px">

      <agm-map [zoom]="4" [latitude]="39.52" [longitude]="-98.35" [fitBounds]="true">
        <div *ngFor="let parkCoordinates of searchResultsLatLongArray">
          <agm-marker *ngIf="parkCoordinates.lat && parkCoordinates.long" [latitude]="parkCoordinates.lat"
            [longitude]="parkCoordinates.long" [agmFitBounds]="true">
            <agm-info-window>
              <a href="{{ parkCoordinates.url }}" target="_blank"
                style="text-decoration: none">{{ parkCoordinates.fullName }}</a>
            </agm-info-window>
          </agm-marker>
        </div>
      </agm-map>

      <div *ngFor="let foundSearchPark of foundSearchParks; let i = index">

        <mat-card style="max-width: 1000px;">

          <mat-card-header fxLayoutAlign="center center">
            <mat-card-title>
              <a href="{{ foundSearchPark.url }}" target="_blank" style="text-decoration: none;">
                {{ foundSearchPark.fullName }}</a>
            </mat-card-title>
            <mat-card-subtitle fxLayoutAlign="center center">
              {{ foundSearchPark.designation }}
            </mat-card-subtitle>
          </mat-card-header>

          <slideshow [imageUrls]="foundSearchParks[i].images" [backgroundSize]="'contain'"
            [backgroundRepeat]="'no-repeat'" [showDots]="true" [arrowSize]="'20px'" [minHeight]="'400px'"></slideshow>

          <mat-card-content>
            <h4>Description:</h4>
            {{foundSearchPark.description }}
          </mat-card-content>

          <mat-card-actions fxLayoutAlign="center center">
            <a href="{{ foundSearchPark.url }}" mat-raised-button color="primary" target="_blank">
              {{ foundSearchPark.name }} Website
            </a>
          </mat-card-actions>

        </mat-card>

      </div>
    </div>
  </div>

  <!-- <div *ngIf="newsFound; else notAvailable"> -->

  <div *ngIf="searchingForNews" style="padding: 35px 0px">
    <mat-spinner></mat-spinner>
  </div>

</div>

<div>

  <mat-toolbar color="primary" fxLayoutAlign="center center">
    <h3>Latest National Park Service News</h3>
  </mat-toolbar>

  <div *ngIf="newsFound">

    <div fxLayoutGap="20px" fxLayout="column" style="padding: 20px 15px 20px 15px;">

      <div *ngFor="let foundNewsRelease of foundNewsReleases">

        <mat-card>

          <mat-card-header fxLayoutAlign="center center">
            <mat-card-title fxLayout="center center" color="primary">
              <a href="{{ foundNewsRelease.url }}" style="text-decoration: none; text-align: center;" target="_blank">
                {{ foundNewsRelease.title }}
              </a>
            </mat-card-title>
            <mat-card-subtitle fxLayoutAlign="center center">
              <h4>{{ foundNewsRelease.releasedate | date: 'MMM d, y' }}</h4>
            </mat-card-subtitle>

          </mat-card-header>

          <mat-card-content>

            <div fxLayoutAlign="center center" fxLayout="column">
              <img mat-card-image [src]="foundNewsRelease.image.url">
              <mat-card-subtitle>{{ foundNewsRelease.image.caption }}</mat-card-subtitle>
            </div>

            <div fxLayoutAlign="center center">
              {{ foundNewsRelease.abstract }}
            </div>

          </mat-card-content>

          <mat-card-actions fxLayoutAlign="center center">
            <a href="{{ foundNewsRelease.url}}" mat-stroked-button color="primary" target="_blank">
              Read more
              <mat-icon>keyboard_arrow_right</mat-icon></a>
          </mat-card-actions>

        </mat-card>

      </div>
    </div>
  </div>
</div>

<div *ngIf="newsFound && !loadingMoreNews" style="padding-bottom: 20px;" fxLayoutAlign="center center">
  <button color="primary" mat-raised-button (click)="getNextNewsReleases()">
    Get more news
    <mat-icon>expand_more</mat-icon>
  </button>
</div>

<div *ngIf="loadingMoreNews" fxLayoutAlign="center center" style="padding: 50px 0px;">
  <mat-spinner></mat-spinner>
</div>